language: java
jdk: openjdk8
services:
- docker
branches:
  except:
  - "/^[0-9]/"
before_script:
- git config --global user.name "${GIT_USER_NAME}"
- git config --global user.email "${GIT_USER_EMAIL}"
- cp .travis.settings.xml $HOME/.m2/settings.xml
script:
if: branch != master OR pull_request = true
 - mvn clean install -Drevision=${TRAVIS_BUILD_NUMBER}.$(git rev-parse --short HEAD)

if: branch = master AND pull_request = false
 - mvn clean install -Drevision=${TRAVIS_BUILD_NUMBER}.$(git rev-parse --short HEAD) deploy scm:tag -Drevision=${TRAVIS_BUILD_NUMBER}.$(git rev-parse --short HEAD) -Dusername="${GIT_USER_NAME}" -Dpassword="${GITPW}"

env:
  global:
  - secure: SmmmsCVa4rRNQP146ky2TMDFnBvtlUFFJy0kk6yV4zetsd901e/GVdg1X4N6UkyPWL8JAmLlRSxI6U1xX5XUQHVisPeDgkSBV9TteeTjoia++fR5ur/ujXcMkUnSY0Kchtt59tR4a49IO5J4oEIMYfxLii7AC1lfGgt0U6TEHQS+Qp84JeSlm5rpWexIyLUsv3MkbsAlEa7RDb7aYX/Gq6XKKpFEtmHMLEJBfwQxHo7UFi00WqRhiIILrY34NRfJbpl8dpqFf1TxJb6fzL0LgQKonjcsnxKwNjLOa9apcrsTFb615CnraUGvKn42vXqva0RQckQC9iJXuq/d7e/aDy6iYRTShxJx6HA5GoDhBXdRajw/tPTAovRzewJW7xefgXzgosAWFfS98p3lMH8xeaGJQ/PeP8+E6NXFa2Ote38Bx6KBrZ28P33sEebpXkI4pni2UPkxWVOYIhiE5eBeZ1xVnAoeFRP6PTAEm0Vxt/UEuUErn4WF+G/Sahl4KTIAl0B2hzl4jGCyYsNm3qsQKREb0iDVmhW/nkSqUZC4jVuH0sFnpxm2jH3ziMkPOgBwN/tZhng/Rk5Jm2p1A9lxb+iCuI9g3kq9cYssUoXGkEwqt8fzUMkya4b4EYGgnjBlk0QSgwYoODT7QRF/at99RwATndoHgMFwyRev3vWYfs4=
  - secure: Ab1TlSM9CDDFgBWSt9Ails7/cawzqJw1he4dWJHeTTHhOyGW8i03Gqs8nrYa1w3YBPyyJO3WvMlGvjwpYaeb3Fl7fUKcZmAgjjd5fTuyjH77+fIbyX4uxC/G1TMKHcrZeocsgAsJ3OmmCCY1UH2vhr+AL+fkAQ9q2XcFHsX504vjyKCljFhXOFn+84RUmhAKJlgunRQTqkS6c5USD+M5KSXeWetSd3camFwycWwUwCjjA8tSp5Efa0ctBIN77AM+bseVy0wKLlZLH9iE5jDo39UO3WHU0QYPkYAErPfd2hLWckfmZzzshGcTs4pbEOTGBn3TQQrNPxB4+fVOyHUg1dIiVvSkgVblun/MUrNZMrUP1WnmatTRqUw+7kaFCUeAc40UPqAtPC/TRVvm40nJlKPYf5OU5XrJkchU2pUISMQ1v1KbVAMU7hx1mT4Yay1R8t+unK6pjI+YM9Tu7UhQDcVuK4ZsFzfm2ZxDfcv3rVWQokSGqFbLTKbUxzQBKOjUOmcDkP98sOhL6ZPnpfL6e5abjssKizc8jV7VEosqNZKEDTq+EsDwiL0nPcWVmQv0rB9jThjUmeLnjW+dQCdsdNCIirIzIvGc/O1KJQESh0MlSf1Od6DmE7wSHZabGeyFbRPGi/Xay7bZA41YSiMh+qRNhoRYDz3GSgGjmbPX3zs=
  - secure: i4KJeZ2zRDczsrw9crBshDkLYEMpQ80TArlsl+hgQWTeRMUkGN6G6pyABkplF49rt8SUI8xz3i3jqTLOLMHJ10WEMuA15T4t+eUIRfD7dtZBpBZuHi2Hrtv+ffZRwEUlPlfYV65OZU/GwvIv35IZCMq30sCLpxEm1b2bxuiF0QE/ZHCJraOJwBd7FxMGlBSUoPF4YV0LK6AuaH3FslmqQRoUnzz7g/Of/2AqB2ooQSSenR6e/ny8MlCvKovNRymmcTMmyXiYit3iJOvfTqXoJX4BwhdkqRIX+Tmz7oWRJJEfeNDMnHpxAK2x58kFnlzzl/AiLtHJzGMewk2a8Wk0jXmlVrO2M/VPRGRCMLVL886y6hB/ZuoY0JZhgtR6pM9QvVk3qlKWWIkT5ewYZerUudZpHLzDdXqhuxJR1CuNtWmlwl+bOeGesPH+UHq7JofC8bvxRZ4CAI5M9rkcDSRCTY5139b1v2N6Udy5RN1s5QMpQN0XgtlWFH751T9jVwvACrK3/Zl4Ykbeybf6lGppnXraXDtw04NPhJ5bMSC61DdGpPruEhpUIv4AwRFnTLVIpY6fux/A586MKKTHymryDqafhsyg6yqqiI0bW0GnRrG6jpbPiE7M/AhOM3MCo5u9Qg2DCy/o1K4lrKoLJvJsBZ53XUlCpgOSI+t4PBzEoxU=
  - secure: QQFB2IAyOAB4rThoC0V7CFLj2P8KQtAqNoK1aXWSqHplnhCSjY5bxXAzyFK4KddEbOMGrKyNKHjO52LtR5kmaNWGlTbdBWHdlBgzBZVYn0aSbN4rHRDvSgEhwFfTuCh2DAOlWkIue4Qpfz+vdJG5NhMzIv6TQar3ligtcmWjmUhDGu7NPfQgROFsqfyQE8CVzBksk8NYP5jberrp8CuiOYVFuBVce/oosVdZHHKuxOYxTvoD6KtieTOdNYKpayMJt+QP5v+XBQpkNyxabqLA/bCoADziL/zzo59wg/bun+LHyBAdNTxAbr58oCdzVtryIQPNc5pq+2sLuZ+WcNyOi4LbgKj3v0nWNZebWLIYkgQPp21WmkFgajZp+CDfu7zEgqgg9A9maymKrkBbj4wLY3u6SzD4lna2sq/Ebw+MwRFkKTg384Zgfr44VN6uaMu3buiJ3vAVUD9Evqfod3AO3JtfuQbm3VS0nb+65xc9Cdzn0ov3OwXDmWsggEi6sqQR9o8rouPEjSn/219EmOXQw3hL+9HRpXZVOy69X7Dl2Wrk4Bf3i4Ikj6p7Qj12yCoaCrY5aybbbwusaLWUoT/FwdVk2X5NjgaTH5+rCwyv6G5mpekRKu+XLSw3ZNDSV/iNfV5RoYJOrzNHG98zS9vW3+0kYbOO+/3V0jdaZfs1Fv4=
